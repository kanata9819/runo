# テスト戦略と公開前チェック

## 1. 何をテストするべきか

GUI ライブラリでは次を分けて考えると管理しやすいです。

1. 純粋ロジック
   レイアウト計算、ID 生成、入力状態遷移
2. 統合ロジック
   イベント投入 -> 状態更新 -> 描画命令生成
3. 目視確認
   テーマ、文字、余白、hover 表現

## 2. 重要な入力テストケース

1. click
2. press -> move out -> release
3. drag start/end
4. resize 中の入力
5. 最小化/復帰後の入力状態

## 3. レイアウトテストケース

1. 縦積み/横積みの spacing
2. 可変テキスト長
3. 0 サイズや極端なサイズ
4. DPI スケール変更

## 4. スナップショット/ゴールデンテスト

描画結果比較は有効ですが、環境差で揺れます。

1. フォント固定
2. 描画バックエンド固定
3. しきい値比較（完全一致だけにしない）

## 5. API 設計の互換性

公開ライブラリでは破壊的変更を管理します。

1. 実験 API と安定 API を分離
2. deprecate 期間を設ける
3. changelog を明確に書く

## 6. リリース前チェックリスト

1. examples が動く
2. 最低限のドキュメントがある
3. 代表ウィジェットの入力挙動が壊れていない
4. パフォーマンス回帰がない
5. 依存ライブラリ更新の影響を確認

## 7. 長期運用で効くこと

1. バグ報告テンプレートを用意
2. 最小再現サンプルを必須化
3. コアモジュールの責務を定期的に見直す

